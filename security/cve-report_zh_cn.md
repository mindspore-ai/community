# MindSpore安全

MindSpore作为一个同时支持端/边缘/云场景的训练推理框架，在终端/边缘计算/云服务/网络设备/存储设备/5G等各个领域广泛使用，需要满足各场景下的应用安全性。

作为通用的计算框架，MindSpore可以运行在CPU/GPU/Ascend等不同的芯片平台上，用户提供数据/模型作为输入，并得到训练模型或者推理结果。数据和模型作为AI领域的核心资产，对AI系统持续开展安全防护，是非常必要的。

我们也提供了关键组件的安全运行建议：

+ [MindSpore安全使用建议](https://gitee.com/mindspore/mindspore/blob/master/SECURITY.md)
+ [MindInsight安全使用建议](https://gitee.com/mindspore/mindinsight/blob/master/SECURITY.md)

为了构建更安全的AI框架，需要您一起来参与。

## 漏洞处理流程

每一个安全漏洞都会有一个指定的人员进行跟踪和处理，他将负责跟踪和推动漏洞的修复和披露。漏洞端到端的处理流程如下图。

![cve-report_zh_cn.jpg](https://gitee.com/mindspore/community/raw/master/security/resource/cve-report_zh_cn.jpg)

在这里我们主要介绍流程中漏洞上报、漏洞评估和漏洞披露这三部分内容。

## 漏洞上报方式

鉴于 MindSpore 安全问题的敏感性，请使用[PGP公钥](https://gitee.com/mindspore/community/blob/master/security/public_key_securities.asc)加密邮件后发送安全邮箱。

+ 安全邮箱：<mindspore-security@mindspore.cn>

## 漏洞上报内容

为了便于快速的确认和验证疑似漏洞，请在漏洞上报邮件中按照[疑似漏洞问题上报模板](https://gitee.com/mindspore/community/blob/master/security/template/report-template_zh_cn.md)撰写包含但不限于以下内容：

+ 基本信息：包括漏洞影响的模块、漏洞的触发条件和成功利用后对系统的影响等。
+ 技术细节：包括系统配置、定位方法、 利用漏洞的描述、证据、问题重现方法和步骤等。
+ 修复方案建议。
+ 上报者的组织和联系方式。
+ 上报者可能的漏洞披露计划。

## 邮件响应时间

您的邮件将在1个工作日内得到确认，在7天内对您反馈的疑似安全问题提供更详细的回复，并给出下一步的处理策略。

## 漏洞严重性评估

业界普遍使用 CVSS 标准评估漏洞的严重性，MindSpore 在使用 CVSSv3 进行漏洞评估时，需要设定漏洞攻击场景，基于在该攻击场景下的实际影响进行评估。漏洞严重等级评估是指针对漏洞利用难易程度，以及利用后对机密性、完整性、可用性的影响进行评估，并生成一个评分值。

## 评估标准

MindSpore 社区采用 CVSS v3 对漏洞进行评估，CVSS V3 通过对以下向量来评估一个漏洞的影响：

+ 攻击向量（AV）-表示攻击的“远程性”以及如何利用此漏洞。
+ 攻击复杂性（AC）-讲述攻击执行的难度以及成功进行攻击需要哪些因素。
+ 用户交互（UI）-确定攻击是否需要用户参与。
+ 所需的权限（PR）-记录成功进行攻击所需的用户身份验证级别。
+ 范围（S）-确定攻击者是否可以影响具有不同权限级别的组件。
+ 机密性（C）-衡量信息泄露给非授权方后导致的影响程度。
+ 完整性（I）-衡量信息被篡改后导致的影响程度。
+ 可用性（A）-衡量用户在需要访问数据或服务时受影响的程度。

## 评估原则

+ 评估漏洞的严重等级，不是评估风险。
+ 评估时必须基于攻击场景，且保证在该场景下，攻击者成功攻击后能对系统造成机密性、完整性、可用性影响。
+ 当安全漏洞有多个攻击场景时，应以造成最大的影响，即 CVSS 评分最高的攻击场景为依据。
+ 被嵌入调用的库存在漏洞，要根据该库在产品中的使用方式，确定漏洞的攻击场景后进行评估。
+ 安全缺陷不能被触发或不影响 CIA(机密性/完整性/可用性)，CVSS 评分为 0 分。

## 评估步骤

对漏洞进行评估时，可根据下述步骤进行操作：

+ 设定可能的攻击场景，基于攻击场景评分。
+ 确定漏洞组件（Vulnerable Component）和受影响组件（Impact Component）。
+ 选择基础评估指标的值：通过对可利用指标（攻击向量/攻击复杂度/所需权限/用户交互/范围）和受影响指标（机密性/完整性/可用性）给出漏洞影响评估。

## 严重等级划分

| 严重等级 (Severity Rating) | CVSS评分（Score) |
| ---   | ---     |
| 致命 (Critical) | 9.0 - 10.0 |
| 高 (High) | 7.0 - 8.9 |
| 中 (Medium) | 4.0 - 6.9 |
| 低 (Low) | 0.1 - 3.9 |
| 无（None) | 0.0 |

## 漏洞披露

为了保护 MindSpore 用户的安全，在进行调查、修复和发布安全公告之前， MindSpore 社区不会公开披露、讨论或确认 MindSpore 产品的安全问题。安全漏洞修复后 MindSpore 社区会发布安全公告 （SA）以及安全说明（SN） ，安全公告内容包括该漏洞的技术细节、类型、上报人、CVE ID 以及受到该漏洞影响的版本和修复版本等信息。

## MindSpore安全公告（SA）

| 公告 | 类型 | 受影响版本 | 上报人 | CVE ID | 附加信息 |
|  ---   | ----        | ---  | ---    | ---     | ---     |
| [MSSA-2021-008](https://gitee.com/mindspore/community/blob/master/security/security_advisory_list/mssa-2021-008.md) | MindSpore Lite的Tile算子中数组越界访问异常 | >= 0.7.0-beta, < 1.3.0 | Wang Xuan(@May) of Qihoo 360 AIVul Team | CVE-2021-33647 |  |
| [MSSA-2021-007](https://gitee.com/mindspore/community/blob/master/security/security_advisory_list/mssa-2021-007.md) | MindSpore Lite的推导shape操作中数组越界访问异常 | >= 1.1.0, < 1.3.0 | Wang Xuan(@May) of Qihoo 360 AIVul Team | CVE-2021-33648 |  |
| [MSSA-2021-006](https://gitee.com/mindspore/community/blob/master/security/security_advisory_list/mssa-2021-006.md) | MindSpore Lite的Transpose算子中数组越界访问异常 | >= 0.7.0-beta, < 1.3.0 | Wang Xuan(@May) of Qihoo 360 AIVul Team | CVE-2021-33649 |  |
| [MSSA-2021-005](https://gitee.com/mindspore/community/blob/master/security/security_advisory_list/mssa-2021-005.md) | MindSpore Lite的SparseToDense算子中数组越界访问异常 | >= 1.2.0, < 1.3.0 | Wang Xuan(@May) of Qihoo 360 AIVul Team | CVE-2021-33650 |  |
| [MSSA-2021-004](https://gitee.com/mindspore/community/blob/master/security/security_advisory_list/mssa-2021-004.md) | MindSpore Lite的DepthwiseConv2D算子parser操作中除零异常 | >= 1.1.0, < 1.3.0 | Wang Xuan(@May) of Qihoo 360 AIVul Team | CVE-2021-33651 |  |
| [MSSA-2021-003](https://gitee.com/mindspore/community/blob/master/security/security_advisory_list/mssa-2021-003.md) | MindSpore Lite的Reduce算子中除零异常 | >= 0.7.0-beta, < 1.3.0 | Wang Xuan(@May) of Qihoo 360 AIVul Team | CVE-2021-33652 |  |
| [MSSA-2021-002](https://gitee.com/mindspore/community/blob/master/security/security_advisory_list/mssa-2021-002.md) | MindSpore Lite的SpaceToBatch算子中除零异常 | >= 0.7.0-beta, < 1.3.0 | Wang Xuan(@May) of Qihoo 360 AIVul Team | CVE-2021-33653 |  |
| [MSSA-2021-001](https://gitee.com/mindspore/community/blob/master/security/security_advisory_list/mssa-2021-001.md) | MindSpore Lite的Split算子中除零异常 | >= 0.7.0-beta, < 1.3.0 | Wang Xuan(@May) of Qihoo 360 AIVul Team | CVE-2021-33654 |  |

## MindSpore安全说明（SN）

第三方的开源组件部分漏洞需要用户自行修复：

| CVE 列表 | 第三方组件 | 建议 |
|  ----    | ----      | ----               |
| [CVE-2019-18348](https://nvd.nist.gov/vuln/detail/CVE-2019-18348), [CVE-2020-8315](https://nvd.nist.gov/vuln/detail/CVE-2020-8315), [CVE-2020-8492](https://nvd.nist.gov/vuln/detail/CVE-2020-8492), [CVE-2020-27619](https://nvd.nist.gov/vuln/detail/CVE-2020-27619), [CVE-2021-3426](https://nvd.nist.gov/vuln/detail/CVE-2021-3426), [CVE-2021-23336](https://nvd.nist.gov/vuln/detail/CVE-2021-23336), [CVE-2019-20907](https://nvd.nist.gov/vuln/detail/CVE-2019-20907), [CVE-2021-3177](https://nvd.nist.gov/vuln/detail/CVE-2021-3177) | Python 3.7.5 |   |
| [CVE-2019-19911](https://nvd.nist.gov/vuln/detail/CVE-2019-19911), [CVE-2020-5310](https://nvd.nist.gov/vuln/detail/CVE-2020-5310), [CVE-2020-5311](https://nvd.nist.gov/vuln/detail/CVE-2020-5311), [CVE-2020-5312](https://nvd.nist.gov/vuln/detail/CVE-2020-5312), [CVE-2020-5313](https://nvd.nist.gov/vuln/detail/CVE-2020-5313) | Pillow < 6.2.2 | 升级至最新的Pillow版本(8.2.0) |
| [CVE-2020-10177](https://nvd.nist.gov/vuln/detail/CVE-2020-10177), [CVE-2020-10378](https://nvd.nist.gov/vuln/detail/CVE-2020-10378), [CVE-2020-10379](https://nvd.nist.gov/vuln/detail/CVE-2020-10379), [CVE-2020-10994](https://nvd.nist.gov/vuln/detail/CVE-2020-10994), [CVE-2020-11538](https://nvd.nist.gov/vuln/detail/CVE-2020-11538) | Pillow < 7.1.0 | 升级至最新的Pillow版本(8.2.0) |
| [CVE-2020-15999](https://nvd.nist.gov/vuln/detail/CVE-2020-15999) | Pillow < 8.0.1 | 升级至最新的Pillow版本(8.2.0) |
| [CVE-2020-35653](https://nvd.nist.gov/vuln/detail/CVE-2020-35653), [CVE-2020-35654](https://nvd.nist.gov/vuln/detail/CVE-2020-35654), [CVE-2020-35655](https://nvd.nist.gov/vuln/detail/CVE-2020-35655)   | Pillow < 8.1.0 | 升级至最新的Pillow版本(8.2.0) |
| [CVE-2021-25289](https://nvd.nist.gov/vuln/detail/CVE-2021-25289), [CVE-2021-25290](https://nvd.nist.gov/vuln/detail/CVE-2021-25290), [CVE-2021-25291](https://nvd.nist.gov/vuln/detail/CVE-2021-25291), [CVE-2021-25292](https://nvd.nist.gov/vuln/detail/CVE-2021-25292), [CVE-2021-25293](https://nvd.nist.gov/vuln/detail/CVE-2021-25293), [CVE-2021-27921](https://nvd.nist.gov/vuln/detail/CVE-2021-27921), [CVE-2021-27922](https://nvd.nist.gov/vuln/detail/CVE-2021-27922), [CVE-2021-27923](https://nvd.nist.gov/vuln/detail/CVE-2021-27923)  | Pillow < 8.1.1 | 升级至最新的Pillow版本(8.2.0) |
| [CVE-2021-25287](https://nvd.nist.gov/vuln/detail/CVE-2021-25287), [CVE-2021-25288](https://nvd.nist.gov/vuln/detail/CVE-2021-25288), [CVE-2021-28675](https://nvd.nist.gov/vuln/detail/CVE-2021-28675), [CVE-2021-28676](https://nvd.nist.gov/vuln/detail/CVE-2021-28676), [CVE-2021-28677](https://nvd.nist.gov/vuln/detail/CVE-2021-28677), [CVE-2021-28678](https://nvd.nist.gov/vuln/detail/CVE-2021-28678) | Pillow < 8.2.0 | 升级至最新的Pillow版本(8.2.0) |
| [CVE-2021-34552](https://nvd.nist.gov/vuln/detail/CVE-2021-34552) | Pillow <= 8.2.0 | 升级至最新的Pillow版本(8.4.0) |
| [CVE-2021-41496](https://nvd.nist.gov/vuln/detail/CVE-2021-41496) | NumPy < 1.19 | 升级NumPy版本 >= 1.22.0 |
| [CVE-2021-34141](https://nvd.nist.gov/vuln/detail/CVE-2021-34141) | NumPy < 1.22.0 | 升级NumPy版本 >= 1.22.0 |
| [CVE-2021-41495](https://nvd.nist.gov/vuln/detail/CVE-2021-41495) | NumPy <= 1.22.0 | 可参考[issue](https://gitee.com/mindspore/mindspore/issues/I4NRZ9?from=project-issue) |

